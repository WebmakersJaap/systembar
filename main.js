require("source-map-support/source-map-support.js").install(),module.exports=function(t){var i={};function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=i,s.d=function(t,i,e){s.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:e})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=24)}([function(t,i){t.exports=require("electron")},function(t,i){t.exports=require("systeminformation")},function(t,i){t.exports=require("path")},function(t,i,s){var e=s(19);t.exports=function(t,i,s){this.defaultPlayer="00:00:00:00:00:00",this.playerId=s,this.address=void 0!==t?t:"localhost",this.port=void 0!==i?i:9e3,this.client=e.client.http("http://"+this.address+":"+this.port+"/jsonrpc.js"),this.client.options.version=1,this.connected=!0,this.init=function(){this.client.request("slim.request",[this.defaultPlayer,["players",0,100]],null,function(t,i){this.connected=!t}.bind(this))},this.handle=function(t,i,s){var e={};t?(e=t).ok=!1:(e=i).ok=!0,s&&s(e)},this.request=function(t,i,s){if(t&&this.connected){var e=[];e.push(t),e.push(i),this.client.request("slim.request",e,null,function(t,i){this.handle(t,i,s)}.bind(this))}},this.serverStatus=function(t){this.request(this.defaultPlayer,["serverstatus",0,999],t)},this.getPlayers=function(t){this.request(this.defaultPlayer,["players",0,100],function(i){i.ok&&(i.result=i.result.players_loop),t(i)})},this.getMode=function(t){this.request(this.playerId,["mode","?"],t)},this.getName=function(t){this.request(this.playerId,["name","?"],t)},this.getCurrentTitle=function(t){this.request(this.playerId,["current_title","?"],function(i){i.ok&&(i.result=i.result._current_title),t(i)})},this.getArtist=function(t){this.request(this.playerId,["artist","?"],function(i){i.ok&&(i.result=i.result._artist),t(i)})},this.getAlbum=function(t){this.request(this.playerId,["album","?"],function(i){i.ok&&(i.result=i.result._album),t(i)})},this.getCurrentRemoteMeta=function(t){this.request(this.playerId,["status"],function(i){i.ok&&(i.result=i.result.remoteMeta),t(i)})},this.getStatus=function(t){this.request(this.playerId,["status"],t)},this.getStatusWithPlaylist=function(t,i,s){this.request(this.playerId,["status",t,i],function(t){t.ok&&(t.result=t.result),s(t)})},this.getPlaylist=function(t,i,s){this.request(this.playerId,["status",t,i],function(t){t.ok&&(t.result=t.result.playlist_loop),s(t)})},this.play=function(t){this.request(this.playerId,["play"],t)},this.pause=function(t){this.request(this.playerId,["pause"],t)},this.previousSong=function(t){this.request(this.playerId,["button","jump_rew"],t)},this.nextSong=function(t){this.request(this.playerId,["button","jump_fwd"],t)},this.sync=function(t,i){this.request(playerId,["sync",t],i)},this.seek=function(t,i){this.request(playerId,["time",t],i)},this.setVolume=function(t,i){this.request(this.playerId,["mixer","volume",t],i)},this.getVolume=function(t){this.request(this.playerId,["mixer","volume","?"],function(i){i.ok&&(i.result=i.result._volume),t(i)})},this.init()}},function(t,i){t.exports=require("filesize")},function(t,i,s){const e=s(3);t.exports=function(t){this.app=t,this.squeeze=new e("192.168.30.15",9e3,"00:04:20:12:22:db"),this.data={id:1,title:"Volume",class:"volume",icon:"fas fa-volume-up",help:"Control system volume",html:'<div class="volValue">??%</div><div class="progress inset" style="width:70px;"><span class="perc" style="width:0%"></span></div>'},this.start=function(){this.app.send("module:start",this.data)},this.tick=function(t){t%3!=0&&0!=t||this.squeeze.getVolume(function(t){this.app.send("module:change",{id:this.data.id,value:t.result})}.bind(this))},this.receive=function(t){this.squeeze.setVolume(parseInt(t))}}},function(t,i,s){const e=s(1),n=s(18);t.exports=function(t){this.app=t,this.data={id:5,title:"Uptime",class:"uptime",icon:"fas fa-clock",help:"Total time this device is running"},this.start=function(){this.app.send("module:start",this.data)},this.tick=function(t){var i=Math.floor(e.time().uptime/86400),s=i>0?i+"d ":"";s+=n.utc(n.duration(e.time().uptime,"seconds").asMilliseconds()).format("HH:mm:ss"),this.app.send("module:change",{id:this.data.id,value:"Up: "+s})}}},function(t,i){t.exports=function(t){this.app=t,this.data={id:11,title:"Trash",class:"trash",icon:"fas fa-trash",help:"Empty"},this.start=function(){this.app.send("module:start",this.data)},this.tick=function(t){}}},function(t,i,s){const{shell:e}=s(0);t.exports=function(t){this.app=t,this.data={id:9,title:"Search",class:"search",icon:"fab fa-google",iconLink:"https://google.com/",help:"Search on google",html:'<input type="text" value="" name="q" id="searchInput" placeholder="Search google">'},this.start=function(){this.app.send("module:start",this.data)},this.receive=function(t){e.openExternal("https://google.com/search?q="+t)}}},function(t,i,s){const e=s(1),n=s(4);t.exports=function(t){this.app=t,this.data={id:4,title:"Network",class:"network",help:"Network information"},this.start=function(){this.app.send("module:start",this.data)},this.tick=function(t){e.networkStats("Ethernet",function(t){var i='<span data-title="Network down total: '+n(t.rx)+'"><i class="fas fa-download"></i> '+n(t.rx_sec,{round:0})+"/s</span>&nbsp;|&nbsp;&nbsp;";i+='<span data-title="Network up total: '+n(t.tx)+'"><i class="fas fa-upload"></i> '+n(t.tx_sec,{round:0})+"/s</span>",this.app.send("module:change",{id:this.data.id,value:i})}.bind(this))}}},function(t,i,s){const e=s(3);t.exports=function(t){this.time=0,this.app=t,this.squeeze=new e("192.168.30.15",9e3,"00:04:20:12:22:db"),this.data={id:2,title:"Music",class:"music",icon:"fas fa-music",iconLink:"http://srvpdc01:9000/",help:"Music control",html:'<div>\n            <i class="fas fa-fw fa-fast-backward"></i>\n            <i class="fas fa-fw fa-play"></i>\n            <i class="fas fa-fw fa-pause"></i>\n            <i class="fas fa-fw fa-fast-forward"></i>\n        </div>'},this.start=function(){this.app.send("module:start",this.data)},this.str_pad_left=function(t,i,s){return(new Array(s+1).join(i)+t).slice(-s)},this.sendTrackInfo=function(){if(0!=this.artist||0!=this.title){0!=this.artist&&0!=this.title&&this.title.substr(0,this.artist.length)==this.artist&&(this.title=this.title.substr(this.artist.length)," - "==this.title.substr(0,3)&&(this.title=this.title.substr(3)));var t=(""!=this.artist?this.artist+" - ":"")+this.title,i=Math.floor(this.time/60),s=this.time-60*i,e='<div class="tracktime" style="width:25px">'+this.str_pad_left(i,0,2)+":"+this.str_pad_left(s,0,2)+"</div>",n='<div class="trackinfo" data-title="'+t+'"><span>'+t+"</span></div>";this.app.send("module:change",{id:this.data.id,value:'<div class="inset" style="display:flex;width:150px;">'+e+n+"</div>"})}},this.tick=function(t){t%3!=0&&0!=t||(this.artist=this.title=!1,this.squeeze.getArtist(function(t){this.artist=!!t.result&&t.result,this.sendTrackInfo()}.bind(this)),this.squeeze.getCurrentTitle(function(t){this.title=!!t.result&&t.result,this.sendTrackInfo()}.bind(this))),this.squeeze.getStatus(function(t){this.time=!(!t.result||!t.result.time)&&parseInt(t.result.time),this.sendTrackInfo()}.bind(this))},this.receive=function(t){switch(t){case"previous":this.squeeze.previousSong();break;case"play":this.squeeze.play();break;case"pause":this.squeeze.pause();break;case"stop":break;case"forward":this.squeeze.nextSong()}}}},function(t,i,s){const e=s(1),n=s(4);t.exports=function(t){this.app=t,this.data={id:7,title:"Memory",class:"memory",icon:"fas fa-memory",help:"Shows memory usage"},this.start=function(){this.app.send("module:start",this.data)},this.tick=function(t){e.mem(function(t){this.app.send("module:change",{id:this.data.id,value:'<span data-title="Total: '+n(t.total)+"\nUsed: "+n(t.active)+"\nFree: "+n(t.free)+'">'+n(t.active)+" / "+n(t.total)+"</span>"})}.bind(this))}}},function(t,i){t.exports=function(t){this.app=t,this.data={id:8,title:"Keyboard",class:"keyboard",icon:"fas fa-keyboard",help:"Active keyboard keys",html:'<div class="key numLock">NL</div>\n        <div class="key capsLock">CL</div>\n        <div class="key scrollLock">SL</div>'},this.start=function(){this.app.send("module:start",this.data)}}},function(t,i,s){var e=s(20);t.exports=function(t){this.lastvalue=0,this.direction='<i class="fas fa-fw fa-minus"></i>',this.app=t,this.data={id:12,title:"Gulden",class:"gulden",icon:"fab fa-gofore",iconLink:"https://www.nocks.com/account/trade/NLG-EUR",help:"Shows current gulden rate"},this.start=function(){this.app.send("module:start",this.data)},this.tick=function(t){t%10!=0&&0!=t||e.get("https://api.nocks.com/api/v2/trade-market/NLG-EUR",function(t){var i="";t.on("data",function(t){i+=t}),t.on("end",function(){var t=function(t){try{return JSON.parse(t)}catch(t){return!1}}(i);if(t){var s=Math.round(t.data.volume.amount);s=new Intl.NumberFormat("nl-NL",{style:"currency",currency:"EUR"}).format(s);var e=parseFloat(t.data.last.amount);this.lastvalue!=e&&(this.direction=e>this.lastvalue?'<i class="fas fa-fw fa-sort-up"></i>':e<this.lastvalue?'<i class="fas fa-fw fa-sort-down"></i>':'<i class="fas fa-fw fa-minus"></i>',this.app.send("module:change",{id:this.data.id,value:'<span data-title="Volume: '+s+'">'+this.direction+" "+e+"</span>"}),this.lastvalue=e)}}.bind(this))}.bind(this)).on("error",function(t){})}}},function(t,i,s){const e=s(1),n=s(4);t.exports=function(t){this.disks={},this.app=t,this.data={id:3,title:"Disk",class:"disk",icon:"fas fa-hdd",help:"Disk information"},this.start=function(){this.app.send("module:start",this.data),e.fsSize(function(t){for(var i in t){if(!t[i].size||!t[i].used)continue;let s={size:parseInt(t[i].size),used:parseInt(t[i].used)};this.disks[t[i].mount]=this.disks[t[i].mount]?Object.assign(this.disks[t[i].mount],s):s}}.bind(this)),e.blockDevices(function(t){for(var i in t){let s={name:t[i].name,type:t[i].physical};this.disks[t[i].mount]=this.disks[t[i].mount]?Object.assign(this.disks[t[i].mount],s):s}}.bind(this))},this.tick=function(t){if(t%5==60||t<10){var i="";for(var s in this.disks){let t=this.disks[s];t.used&&t.size&&(i+='<div class="progress vertical inset" data-title="Total: '+n(t.size)+"\nUsed: "+n(t.used)+"\nFree: "+n(t.size-t.used)+'">',i+="<span>"+t.name+'</span><span class="perc" style="height:'+Math.round(100*t.used/t.size)+'%"></span></div>')}this.app.send("module:change",{id:3,value:i})}}}},function(t,i,s){const e=s(1);t.exports=function(t){this.app=t,this.data={id:6,title:"CPU",class:"cpu",icon:"fas fa-microchip",help:"Shows CPU usage"},this.start=function(){this.app.send("module:start",this.data)},this.tick=function(t){e.currentLoad(function(t){var i=Math.round(100*t.currentload)/100,s='<span data-title="Current: '+i+'%"'+(i>90?' class="danger"':"")+">"+i+"%</span>";this.app.send("module:change",{id:this.data.id,value:s})}.bind(this))}}},function(t,i){t.exports=function(t){this.app=t,this.data={id:10,title:"Battery",class:"battery",icon:"fas fa-battery-full",help:"Shows battery status"},this.start=function(){this.app.send("module:start",this.data)},this.tick=function(t){}}},function(t,i){t.exports=require("url")},function(t,i){t.exports=require("moment")},function(t,i){t.exports=require("jayson")},function(t,i){t.exports=require("https")},function(t,i,s){var e={"./battery":16,"./battery.js":16,"./cpu":15,"./cpu.js":15,"./disk":14,"./disk.js":14,"./gulden":13,"./gulden.js":13,"./keyboard":12,"./keyboard.js":12,"./memory":11,"./memory.js":11,"./music":10,"./music.js":10,"./network":9,"./network.js":9,"./search":8,"./search.js":8,"./squeezerequest":3,"./squeezerequest.js":3,"./trash":7,"./trash.js":7,"./uptime":6,"./uptime.js":6,"./volume":5,"./volume.js":5};function n(t){var i=a(t);return s(i)}function a(t){var i=e[t];if(!(i+1)){var s=new Error('Cannot find module "'+t+'".');throw s.code="MODULE_NOT_FOUND",s}return i}n.keys=function(){return Object.keys(e)},n.resolve=a,t.exports=n,n.id=21},function(t,i){t.exports=require("electron-store")},function(t,i,s){"use strict";s.r(i);var e=s(0),n=s(2),a=s(17);s(22);const o=s(0);let r;process.env.ELECTRON_DISABLE_SECURITY_WARNINGS="true";let u={tray:null,config:null,menuArr:[],isQuitting:!1,isAlreadyRunning:!1,moduleNames:["volume","music","disk","uptime","network","cpu","memory","keyboard","gulden"],modules:[],init:function(){this.isAlreadyRunning=e.app.makeSingleInstance(this.onAppSingleInstance.bind(this)),this.isAlreadyRunning&&e.app.quit(),this.createMainWindow(),this.createTray(),e.app.on("window-all-closed",this.onAppWindowAllClosed.bind(this)),e.app.on("activate",this.onAppActivate.bind(this)),e.app.on("before-quit",this.onAppBeforeQuit.bind(this)),this.show(),e.app.setLoginItemSettings({openAtLogin:!0})},createMainWindow:function(){let t=o.screen.getPrimaryDisplay(),i=Math.round(t.size.width),s=Math.round(t.size.height);this.mainWindow=new e.BrowserWindow({frame:!1,skipTaskbar:!0,transparent:!0,title:e.app.getName(),icon:n.join(process.resourcesPath+"/static","icontray.png"),x:0,y:0,width:i,height:s,minWidth:i,maxWidth:i,minHeight:s,maxHeight:s,icon:n.join(process.resourcesPath+"/static","icontray.png"),alwaysOnTop:!0,autoHideMenuBar:!0,webPreferences:{backgroundThrottling:!1}}),this.mainWindow.loadURL(Object(a.format)({pathname:n.join(process.resourcesPath+"/static","index.html"),protocol:"file",slashes:!0})),this.mainWindow.setMenu(null),this.mainWindow.on("close",this.onWindowClose.bind(this)),this.mainWindow.on("minimize",this.onWindowMinimize.bind(this)),this.mainWindow.on("focus",this.onWindowFocus.bind(this)),this.mainWindow.on("closed",this.onWindowClosed.bind(this)),this.mainWindow.webContents.on("dom-ready",this.onWindowDomReady.bind(this)),this.mainWindow.webContents.on("new-window",function(t,i,s,n,a){t.preventDefault(),e.shell.openExternal(i)}.bind(this)),r=this.mainWindow},createTray:function(){if("darwin"===process.platform||this.tray)return;this.menuArr=[{label:"Hide "+e.app.getName(),click:function(){this.hideWin()}.bind(this)},{type:"separator"},{role:"quit"}];const t=n.join(process.resourcesPath+"/static","icontray.png");let i=o.Menu.buildFromTemplate(this.menuArr);this.tray=new o.Tray(t),this.tray.setToolTip(e.app.getName()),this.tray.setContextMenu(i),this.tray.on("click",this.toggleWin.bind(this))},toggleWin:function(){this.mainWindow.isVisible()?this.hide():this.show()},show:function(){this.mainWindow.isMinimized()&&this.restore(),this.mainWindow.show(),this.menuArr.shift(),this.menuArr.unshift({label:"Hide "+e.app.getName(),click:function(){this.hide()}.bind(this)});let t=o.Menu.buildFromTemplate(this.menuArr);this.tray.setContextMenu(t)},hide:function(){this.mainWindow.hide(),this.menuArr.shift(),this.menuArr.unshift({label:"Show "+e.app.getName(),click:function(){this.show()}.bind(this)});let t=o.Menu.buildFromTemplate(this.menuArr);this.tray.setContextMenu(t)},restore:function(){this.mainWindow.restore()},onWindowClose:function(t){},onWindowMinimize:function(t){t.preventDefault(),this.mainWindow.hide()},onWindowClosed:function(t){this.mainWindow=null},onWindowFocus:function(t){this.mainWindow.flashFrame(!1)},onWindowDomReady:function(t){setTimeout(function(){this.initModules()}.bind(this),200)},send:function(t,i){this.mainWindow&&this.mainWindow.webContents.send(t,i)},receive:function(t,i){for(var s in this.modules)this.modules[s].name==t&&void 0!==this.modules[s].module.receive&&this.modules[s].module.receive(i)},tick:function(){for(var t in this.modules)void 0!==this.modules[t].module.tick&&this.modules[t].module.tick(this.tickNr);this.tickNr++},initModules:function(){for(var t in this.moduleNames){var i=s(21)("./"+this.moduleNames[t]);this.modules[t]={name:this.moduleNames[t],module:new i(this)},this.modules[t].module.start()}e.ipcMain.on("module:change",function(t,i){this.receive(i.key,i.data)}.bind(this)),this.tickNr=0,this.tickInt&&clearInterval(this.tickInt),this.tickInt=setInterval(function(){this.tick()}.bind(this),1e3),this.tick()},onAppSingleInstance:function(t){r&&(r.isMinimized()&&this.restore(),this.show())},onAppWindowAllClosed:function(t){"darwin"!==process.platform&&e.app.quit()},onAppActivate:function(t){null===r&&this.createMainWindow(),this.show()},onAppBeforeQuit:function(t){this.isQuitting=!0}};e.app.on("ready",function(){u.init()})},function(t,i,s){t.exports=s(23)}]);
//# sourceMappingURL=main.js.map